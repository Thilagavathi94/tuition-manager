<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fees Management</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>
<body>

<!-- Sidebar -->
<div class="layout">
    <aside class="sidebar">
        <h2 class="logo">Tuition Manager</h2>

        <nav>
            <a href="/dashboard">
                <i class="fa fa-home"></i> Dashboard
            </a>

            <a href="/students">
                <i class="fa fa-user-graduate"></i> Students
            </a>

            <a href="/fees">
                <i class="fa fa-rupee-sign"></i> Fees
            </a>

            <a href="/attendance">
                <i class="fa fa-calendar-check"></i> Attendance
            </a>

            <a href="/attendance/monthly-report?month=1&year=2026">
                <i class="fa fa-chart-bar"></i> Monthly Attendance
            </a>

            <a href="/attendance/monthly-combined-report?month=1&year=2026">
                <i class="fa fa-layer-group"></i> Fees + Attendance
            </a>
        </nav>
    </aside>

    <main class="content">
        <!-- PAGE CONTENT HERE -->
         <div class="main">

    <div class="page-title">Fees Management</div>

  <h3>Generate Monthly Fee</h3>

<form method="post" action="/fees/add">


    <div class="form-group">
        <label>Select Student</label>
        <select name="studentId" required>
            <option value="">-- Select Student --</option>
            <option th:each="s : ${students}"
                    th:value="${s.id}"
                    th:text="${s.name}">
            </option>
        </select>
    </div>

    <div class="form-group">
        <label>Month</label>
        <select name="month" required>
            <option value="">-- Select Month --</option>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
        </select>
    </div>

    <div class="form-group">
        <label>Year</label>
        <input type="number" name="year" value="2026" required>
    </div>

    <div class="form-group">
        <label>&nbsp;</label>
        <button class="btn btn-primary">
            <i class="fa fa-plus-circle"></i> Generate Fee
        </button>
    </div>

</form>


    <!-- Fees List -->
    <div class="card-box">
        <h3>Fee Records</h3>

        <table class="table">
            <thead>
            <tr>
                <th>Student</th>
                <th>Month</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="f : ${feesList}">
                <td th:text="${f.student.name}"></td>
                <td th:text="${T(java.time.Month).of(f.month).name()}"></td>

                <td>â‚¹ <span th:text="${f.amount}"></span></td>

               <td>
    <a th:if="${f.status=='PENDING'}"
       th:href="@{/fees/pay/{id}(id=${f.id})}"
       class="btn" style="background:#16a34a;">
       Mark Paid
    </a>

    <a th:if="${f.status=='PAID'}"
       th:href="@{/fees/receipt/{id}(id=${f.id})}"
       class="btn" style="background:#2563eb;">
       Receipt
    </a>
</td>


                <td>
                   <a th:href="@{/fees/pay/{id}(id=${f.id})}" class="btn">
    Mark Paid
</a>

                </td>
            </tr>
            </tbody>
        </table>

    </div>

</div>

    </main>
</div>



</body>
</html>
